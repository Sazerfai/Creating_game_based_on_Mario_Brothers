# Creating_game_based_on_Mario_Brothers
An object-oriented approach to creating a game application based on the example of the Mario Brothers game.
Объектно-ориентированный подход при создании игрового приложения на примере игры "Братья Марио".

Перед тем как приступить к программированию разрабатывается иерархия классов. Базовый класс – класс Object (Объект). От него наследуется класс: Player (Игрок). Также был создан отдельный класс Map (Игровой уровень или карта).

![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/b3552d0e-f2ee-47d8-8ec6-91ad8984b020)

В начале, проектируем базовый класс, содержащий поля, общие для класса-наследников.
В данной работе класс Object является базовым классом.
![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/8b582f7f-f45c-4656-b974-98c69dd4cda1)

Поля базового класса Object:
•	dx – ускорение объекта по X;
•	dy – ускорение объекта по Y;
•	x – координата объекта по оси Х; 
•	y – координата объекта по оси Y;
•	speed – скорость объекта;
•	w – ширина вырезания спрайта;
•	h – высота вырезания спрайта;
•	health – уровень здоровья;
•	life – два состояния: жив/мертв;
•	isMove – отвечает за движение персонажа, два значения bool(1, 0): двигается/не двигается;
•	onGround – нахождение на земле;
•	texture – SFML текстура;
•	sprite –SFML спрайт;
•	name – имя объекта.
 Методы базового класса Object:
•	Object (Image&, String, float, float, int, int) – конструктор по умолчанию;
•	~ Object () – деструктор;

Класс Player является наследником класса Object. У класса игрока появляется поле playerScore, которое отвечает за бонусы и очки, и state, которое отвечает за состояние игрока(вправо, влево и т.д.).
![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/eb808232-a441-4550-9e28-9d7b4c1b43be)

Поля класса Player:
•	playerScore – бонусы и очки игрока;
•	state - тип перечисления enum - состояние объекта: вправо, влево, вверх, вниз, прыжок, стоять.
Методы класса Player:
•	Player(Image&, float, float, int, int, String) – конструктор по умолчанию;
•	~Player() – деструктор;
•	getPlayerCoordinateX() – получение координаты Х игрока;
•	getPlayerCoordinateY– получение координаты Y игрока;
•	control() – функция управления персонажем;
•	update(float) – функция в которой описана логика движений персонажа и притяжение к земле;
•	checkCollisionWithMath(float, float, Map) – функция физики столкновения игрока с картой.


Класс Map является классом уровня – карты, в котором есть лишь одно поле - массив строк, который по сути является двумерным массивом, нужным для посимвольной отрисовки карты (каждый символ в массиве строк привязан к соответствующему спрайту карты 32*32 пикселя, который вырезается из общего изображения карты) и проверки пересечения с элементами.
![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/80678d80-3946-4a4d-9550-ef5d4e5eb78a)

Был создан отдельный файл «Camera.h» для работы с камерой SFML, в данной работе для того, чтобы камера следовала за персонажем. 
Продемонстрируем работу разработанной программы
![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/4ffcb277-891f-4623-9746-9d7bedae3cf5)

При запуске программы открывается окно с игрой, в которой персонаж находится на своей стартовой позиции (Рис.5).
Управление объектом осуществляется с помощью стрелок на клавиатуре. За передвижение отвечает функция control, которая находится только в классе Player (Игрок). При нажатии клавиши вправо и влево объект двигается соответственно, если же нажать клавишу пробел персонаж выполнит действие «прыжок». При этом на каждую сторону движения есть анимация персонажа игры, привязанная ко времени, прошедшего с запуска окна игры, например, анимация прыжка (Рис. 7). Control вызывается в функции update. Таким образом, осуществляется передвижение по карте. В функции checkCollisionWithMath проверяется столкновение с элементами карты, например при желании прохождения через «блок стены» персонаж останавливается (Рис.6). Другие элементы карты: «куст», «облако», «фон», с которыми игрок никак не взаимодействует; «монетка» при взаимодействии с которой игрок получает 50 дополнительных очков; «гриб» при взаимодействии с которым игрок получает 100 дополнительных очков, но при этом теряет 1 единицу жизни; «хищный цветок» при взаимодействии с которым игрок теряет 1 единицу жизни.
В игре предусмотрены два сценария окончания игры: хороший сценарий (Цель – набрать 200 очков), при котором игра заканчивается и на экране выводится надпись «You win»; плохой сценарий, который выполняется при потере всех 3 очков жизни, в этом случае игра заканчивается и выводится надпись «Game over».
![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/4f99988d-1422-403e-9ca1-9abbb4334a22)


![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/64609c1f-3ff0-4c76-95af-baabc9ad1e97)


![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/b6f9ad8e-79c9-45e5-99cd-bf6af510c376)


 ![image](https://github.com/Sazerfai/Creating_game_based_on_Mario_Brothers/assets/79790554/302392a6-5fca-4539-91f4-e4ffa4e1343c)
